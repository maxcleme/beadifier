<div class="mat-typography" data-layout="column" data-layout-gap="1em">
    <div data-layout="row">
        <ntkme-github-button user="maxcleme" type="follow">
        </ntkme-github-button>
        <ntkme-github-button user="maxcleme" repo="beadifier" type="issue">
        </ntkme-github-button>
    </div>
    <div data-layout="row" data-layout-align="center">
        <div class="banner-container">
            <div data-layout="row" data-layout-align="center">
                <img alt="banner" src="/assets/banner.png" width="100%" />
            </div>
        </div>
    </div>

    <img
        #source
        [ngStyle]="{
            display: 'none',
            position: 'absolute',
            top: '0px',
            left: '0px',
            filter: project ? project.imageConfiguration.css() : ''
        }"
    />

    <div #canvasContainer class="hidden-container">
        <canvas></canvas>
    </div>

    <div data-layout="row" data-layout-align="center" *ngIf="project">
        <div data-flex="90">
            <mat-card appearance="outlined">
                <mat-card-content>
                    <app-project-option
                        [project]="project"
                        [usage]="usage"
                        [reducedColor]="reducedColor"
                        (onLoad)="beadify($event)"
                    >
                    </app-project-option>
                </mat-card-content>
            </mat-card>
        </div>
    </div>

    <div [ngStyle]="{ visibility: reducedColor ? 'visible' : 'hidden' }">
        <div data-layout="row" data-layout-align="center">
            <div data-flex="90">
                <mat-card appearance="outlined">
                    <mat-card-content>
                        <div data-layout="column wrap" data-layout-gap="1em">
                            <div
                                data-layout="row"
                                data-flex="100"
                                data-layout-gap="1em"
                                data-layout-align="center center"
                            >
                                <div
                                    data-flex="50"
                                    class="mat-subtitle-1"
                                    style="text-align: center"
                                >
                                    Pattern
                                </div>
                                <div
                                    data-flex="50"
                                    class="mat-subtitle-1"
                                    style="text-align: center"
                                >
                                    Source
                                </div>
                            </div>
                            <div
                                data-layout="row"
                                data-flex="100"
                                data-layout-gap="1em"
                                data-layout-align="center center"
                                style="width: 100%"
                            >
                                <div
                                    data-flex="50"
                                    [ngStyle]="{
                                        overflow: 'auto hidden',
                                        height:
                                            aspectRatio *
                                                project.boardConfiguration.board
                                                    .nbBeadPerRow *
                                                project.boardConfiguration
                                                    .nbBoardHeight *
                                                beadSize +
                                            'px'
                                    }"
                                >
                                    <div
                                        #preview
                                        class="renderer"
                                        [ngStyle]="{
                                            'will-change': 'transform',
                                            'transform-origin': '0% 0%',
                                            transform:
                                                'scale(' +
                                                aspectRatio +
                                                ',' +
                                                aspectRatio +
                                                ')'
                                        }"
                                    ></div>
                                </div>
                                <div
                                    data-flex="50"
                                    [ngStyle]="{
                                        height:
                                            aspectRatio *
                                                project.boardConfiguration.board
                                                    .nbBeadPerRow *
                                                project.boardConfiguration
                                                    .nbBoardHeight *
                                                beadSize +
                                            'px'
                                    }"
                                >
                                    <img
                                        *ngIf="project && project.image"
                                        [src]="project.image.src"
                                        [ngStyle]="{
                                            height: project
                                                .rendererConfiguration.center
                                                ? '100%'
                                                : 'auto',
                                            width: project.rendererConfiguration
                                                .center
                                                ? '100%'
                                                : 'auto',
                                            'object-fit': project
                                                .rendererConfiguration.fit
                                                ? 'contain'
                                                : 'none',
                                            border: '1px solid',
                                            'border-color':
                                                'rgb(128, 128, 128)',
                                            filter: project
                                                ? project.imageConfiguration.css()
                                                : ''
                                        }"
                                    />
                                </div>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </div>
</div>
