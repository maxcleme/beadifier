<div class="mat-typography" fxLayout="column" fxLayoutGap="1em">
  <div fxLayout="row">
    <ntkme-github-button user="maxcleme" type="follow">
    </ntkme-github-button>
    <ntkme-github-button user="maxcleme" repo="beadifier" type="issue">
    </ntkme-github-button>
  </div>
  <div fxLayout="row" fxLayoutAlign="center">
    <div class="banner-container">
      <div fxLayout="row" fxLayoutAlign="center">
        <img alt="banner" src="/assets/banner.png" width="100%">
      </div>
    </div>
  </div>


  <div fxLayout="row" fxLayoutAlign="center">
    <img #source [ngStyle]="{'display': 'none', 'filter' : project ? project.imageConfiguration.css() : ''}">
  </div>
  <div fxLayout="row" fxLayoutAlign="center" class="hidden-container">
    <canvas #canvas></canvas>
  </div>

  <div fxLayout="row" fxLayoutAlign="center" *ngIf="project">
    <div fxFlex="90%">
      <mat-card>
        <mat-card-content>
          <project-option [project]="project" [usage]="usage" [reducedColor]="reducedColor" (onLoad)="beadify($event)"></project-option>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- <mat-progress-spinner *ngIf="loading" mode="indeterminate"></mat-progress-spinner> -->

  <div [ngStyle]="{'visibility': reducedColor ? 'visible' : 'hidden'}">
    <div fxLayout="row" fxLayoutAlign="center">
      <div fxFlex="90%">
        <mat-card>
          <mat-card-content>
            <div fxLayout="column wrap" fxLayoutGap="1em">
              <div fxLayout="row" fxFlex="100%" fxLayoutGap="1em" fxLayoutAlign="center center">
                <div fxFlex="50%" class="mat-subheading-2" style="text-align: center;">Pattern</div>
                <div fxFlex="50%" class="mat-subheading-2" style="text-align: center;">Source</div>
              </div>
              <div fxLayout="row" fxFlex="100%" fxLayoutGap="1em" fxLayoutAlign="center center" style="width:100%;">
                <div fxFlex="50%" [ngStyle]="{'height' : aspectRatio * canvas.height * beadSize + 'px'}">
                  <div #preview class="renderer" [ngStyle]="{'transform':'scale('+aspectRatio+','+aspectRatio+')'}">
                  </div>
                </div>
                <div fxFlex="50" [ngStyle]="{'height' : aspectRatio * canvas.height * beadSize + 'px'}">
                  <img *ngIf="project" [src]="project.imageSrc" [ngStyle]="{
                      'height':'100%', 
                      'width':'100%', 
                      'object-fit': 'contain', 
                      'border': '1px solid',
                      'border-color': 'rgb(128, 128, 128)',
                      'filter' : project ? project.imageConfiguration.css() : ''
                    }">
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
</div>
